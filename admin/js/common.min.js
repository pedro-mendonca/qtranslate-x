function qtranxj_get_cookie(n){for(var a=document.cookie.split(";"),e=0;e<a.length;++e){var t=a[e],i=t.split("=");if(i[0].trim()==n&&!(a.length<2))return i[1].trim()}return""}function qtranxj_isArray(n){return n.constructor.toString().indexOf("Array")>=0}function qtranxj_ce(n,a,e,t){var i=document.createElement(n);if(a)for(prop in a)i[prop]=a[prop];return e&&(t&&e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)),i}function qtranxj_LanguageSwitch(n){function a(){var n=this;if(!n.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(qTranslateConfig.activeLanguage!==n.lang){if(qTranslateConfig.activeLanguage)for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],e=0;e<a.length;++e)a[e].classList.remove("active");qTranslateConfig.activeLanguage=n.lang;for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],e=0;e<a.length;++e)a[e].classList.add("active");for(var t=qTranslateConfig.onTabSwitchFunctions,e=0;e<t.length;++e)t[e].call(this)}}var e=qTranslateConfig.enabled_languages,t=qTranslateConfig.language_name;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var i=0;i<e.length;++i){var r=qTranslateConfig.flag_location,o=e[i],s=qtranxj_ce("li",{lang:o,className:"qtranxs-lang-switch",onclick:a},n);qtranxj_ce("img",{src:r+qTranslateConfig.flag[o]},s),qtranxj_ce("span",{innerHTML:t[o]},s),qTranslateConfig.activeLanguage==o&&s.classList.add("active"),qTranslateConfig.tabSwitches[o]||(qTranslateConfig.tabSwitches[o]=[]),qTranslateConfig.tabSwitches[o].push(s)}}qtranxj_split=function(n){for(var a=new Object,e=0;e<qTranslateConfig.enabled_languages.length;++e){var t=qTranslateConfig.enabled_languages[e];a[t]=""}var i=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\])/gi,r=n.xsplit(i);if(!qtranxj_isArray(r))return a;if(1==r.length){for(var o=r[0],s=0;s<qTranslateConfig.enabled_languages.length;++s){var t=qTranslateConfig.enabled_languages[s];a[t]+=o}return a}var l=/<!--:([a-z]{2})-->/gi,g=/\[:([a-z]{2})\]/gi;t=!1;for(var e=0;e<r.length;++e){var o=r[e];if(o.length)if(matches=l.exec(o),l.lastIndex=0,null==matches)if("<!--:-->"!=o&&"[:]"!=o)if(matches=g.exec(o),g.lastIndex=0,null==matches)if(t)a[t]+=o,t=!1;else for(var d in a)a[d]+=o;else t=matches[1];else t=!1;else t=matches[1]}return a},qtranxj_allthesame=function(n){if(0==qTranslateConfig.enabled_languages.length)return"";for(var a="",e=0;e<qTranslateConfig.enabled_languages.length;++e){var t=qTranslateConfig.enabled_languages[e],i=n[t];if(i&&""!=i){a=i;break}}if(""==a)return a;for(var e=0;e<qTranslateConfig.enabled_languages.length;++e){var t=qTranslateConfig.enabled_languages[e],i=n[t];if(i!=a)return null}return a},qtranxj_join_c=function(n){return qtranxj_join_b(n)},qtranxj_join_b=function(n){var a=qtranxj_allthesame(n);if(null!=a)return a;for(var a="",e=0;e<qTranslateConfig.enabled_languages.length;++e){var t=qTranslateConfig.enabled_languages[e],i=n[t];i&&""!=i&&(a+="[:"+t+"]",a+=i)}return""!=a&&(a+="[:]"),a},qtranxj_join_byline=function(n){var a=qtranxj_allthesame(n);if(null!=a)return a;for(var e in n)n[e]=n[e].split("\n");for(var a="",t=0;!0;++t){var i;for(var e in n)if(!(n[e].length()<=t)){var r=n[e][t];r&&""!=r&&(i[e]=r)}if(!i)break;a+=qtranxj_join_b(i)}return a},String.prototype.xsplit=function(n){if(3==="a~b".split(/(~)/).length)return this.split(n);n.global||(n=new RegExp(n.source,"g"+(n.ignoreCase?"i":"")));for(var a,e=0,t=[];null!=(a=n.exec(this));)t.push(this.slice(e,a.index)),a.length>1&&t.push(a[1]),e=n.lastIndex;return e<this.length&&t.push(this.slice(e)),e==this.length&&t.push(""),t};var qTranslateX=function(n){this.ge=function(n){return document.getElementById(n)},isLanguageEnabled=function(n){for(var a=0;a<qTranslateConfig.enabled_languages.length;++a)if(qTranslateConfig.enabled_languages[a]==n)return!0;return!1},qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};var a=[],e={};if(updateFusedValueHooked=function(n){switch(n.separator){case"<":n.mlContentField.value=qtranxj_join_c(n.contents);break;case"byline":n.mlContentField.value=qtranxj_join_byline(n.contents);break;case"[":default:n.mlContentField.value=qtranxj_join_b(n.contents)}},updateFusedValueH=function(n,a){var t=e[n],i=a.trim();t.contents[t.lang]=i,updateFusedValueHooked(t)},addContentHook=function(n,a,t){if(!n)return!1;if(!n.name)return!1;switch(n.tagName){case"TEXTAREA":case"INPUT":break;default:return!1}if(n.id||(n.id=n.tagName,a.id&&(n.id+=a.id),n.name&&(n.id+=n.name)),e[n.id])return!0;var i=e[n.id]={};i.contentField=n,i.contents=qtranxj_split(n.value),i.mlContentField=qtranxj_ce("input",{name:n.name,type:"hidden",className:"hidden",value:n.value},a,!0),t||(t="TEXTAREA"===n.tagName?"<":"["),i.separator=t,n.name="edit-"+n.name,i.lang=qTranslateConfig.activeLanguage;var r=i.contents[i.lang];if(n.value=r,n.onblur=function(){updateFusedValueH(this.id,this.value)},n.className+=" qtranxs-translatable",window.tinyMCE)for(var o=0;o<tinyMCE.editors.length;++o){var s=tinyMCE.editors[o];s.id==n.id&&(i.mce=s,updateTinyMCE(s,r))}return i},this.addContentHookC=function(n,a){return addContentHook(n,a,"<")},this.addContentHookB=function(n,a){return addContentHook(n,a,"[")},this.addContentHookById=function(n,a,e){return addContentHook(this.ge(n),a,e)},this.addContentHookByIdName=function(n,a){var e;return(0==n.indexOf("<")||0==n.indexOf("["))&&(e=n.substring(0,1),n=n.substring(1)),this.addContentHookById(n,a,e)},this.addContentHookByIdC=function(n,a){return this.addContentHookById(n,a,"<")},this.addContentHookByIdB=function(n,a){return this.addContentHookById(n,a,"[")},addDisplayHook=function(n){if(!n)return!1;var e={};e.elem=n;var t=n.innerHTML.replace(/&lt;!--:([a-z]{2}|)--&gt;/gi,"<!--:$1-->");if(e.contents=qtranxj_split(t),n.innerHTML=e.contents[qTranslateConfig.activeLanguage],n.value){var i=n.value.replace(/&lt;!--:([a-z]{2}|)--&gt;/gi,"<!--:$1-->");""!=i&&(e.values=qtranxj_split(i),n.value=e.values[qTranslateConfig.activeLanguage])}return a.push(e),!0},this.addDisplayHookById=function(n){return addDisplayHook(this.ge(n))},setLangCookie=function(n){document.cookie="qtrans_edit_language="+n},updateTinyMCE=function(n,a){window.switchEditors&&(a=window.switchEditors.wpautop(a)),n.setContent(a,{format:"html"})},onTabSwitch=function(){setLangCookie(this.lang);for(var n=0;n<a.length;++n){var t=a[n];t.elem.innerHTML=t.contents[this.lang],t.values&&(t.elem.value=t.values[this.lang])}for(var i in e){var t=e[i],r=t.mce&&!t.mce.hidden;r&&(t.mce.save({format:"html"}),t.contents[t.lang]=t.contentField.value),t.lang=this.lang,t.contentField.value=t.contents[this.lang],r&&updateTinyMCE(t.mce,t.contentField.value)}},qTranslateConfig.qtx=this,onTabSwitchCustom=function(){n.onTabSwitch(this.lang,qTranslateConfig.qtx)},addDisplayHooks=function(n){for(var a=0;a<n.length;++a){var e=n[a];switch(e.tagName){case"TEXTAREA":case"INPUT":break;default:addDisplayHook(e)}}},this.addDisplayHooksByClass=function(n,a){var e=a.getElementsByClassName(n);addDisplayHooks(e)},this.addDisplayHooksByTagInClass=function(n,a,e){for(var t=e.getElementsByClassName(n),i=0;i<t.length;++i){var r=t[i],o=r.getElementsByTagName(a);addDisplayHooks(o)}},addContentFieldHooks=function(n,a,e){for(var t=0;t<n.length;++t){var i=n[t];addContentHook(i,a,e)}},addContentHooksByClassName=function(n,a,e,t){e||(e=a);var i=e.getElementsByClassName(n);addContentFieldHooks(i,a,t)},this.addContentHooksByClass=function(n,a,e){var t;(0==n.indexOf("<")||0==n.indexOf("["))&&(t=n.substring(0,1),n=n.substring(1)),addContentHooksByClassName(n,a,e,t)},this.addCustomContentHooks=function(n){for(var a=0;a<qTranslateConfig.custom_fields.length;++a){var e=qTranslateConfig.custom_fields[a];this.addContentHookByIdName(e,n)}for(var a=0;a<qTranslateConfig.custom_field_classes.length;++a){var e=qTranslateConfig.custom_field_classes[a];this.addContentHooksByClass(e,n)}},this.addPageHooks=function(n){for(var a=0;a<n.length;++a){var e,t=n[a];e=t.form?document.getElementById(t.form.id):this.getWrapForm();for(var i=0;i<t.fields.length;++i){var r=t.fields[i],o=[];if(r.container_id){var s=document.getElementById(r.container_id);s&&o.push(s)}else r.container_class?o=document.getElementsByClassName(r.container_class):e&&o.push(e);var l=r.encode;switch(l){case"display":if(r.id)addDisplayHook(document.getElementById(r.id));else if(r.class)for(var g=0;g<o.length;++g){var s=o[g];this.addDisplayHooksByClass(r.class,s)}else{if(!r.tag)continue;for(var g=0;g<o.length;++g){var s=o[g],d=s.getElementsByTagName(r.tag);addDisplayHooks(d)}}break;case"[":case"<":case"byline":default:if(!e)continue;if(r.id)this.addContentHookById(r.id,e,l);else if(r.class)for(var g=0;g<o.length;++g){var s=o[g];addContentHooksByClassName(r.class,e,s,l)}else{if(!r.tag)continue;for(var g=0;g<o.length;++g)for(var s=o[g],u=s.getElementsByTagName(r.tag),f=0;f<u.length;++f){var c=u[f];(!r.name||c.name&&r.name==c.name)&&addContentHook(c,e,l)}}}}}},this.addContentHooksTinyMCE=function(){function n(n){var a=n.id;if(a){var t=e[a];if(t&&!t.mce)return t.mce=n,n.getBody().addEventListener("blur",function(){var a=e[n.id];n.save(),a.contents[a.lang]=a.contentField.value,updateFusedValueHooked(a)}),n.getContainer().className+=" qtranxs-translatable",n.getElement().className+=" qtranxs-translatable",t}}window.addEventListener("load",function(){if(window.tinyMCE){for(var a=0;a<tinyMCE.editors.length;++a){var t=tinyMCE.editors[a],i=n(t);i&&updateTinyMCE(t,i.contentField.value)}for(var r in e){var i=e[r];i.mce||"TEXTAREA"===i.contentField.tagName&&tinyMCEPreInit.mceInit[r]&&(tinyMCEPreInit.mceInit[r].init_instance_callback=function(a){n(a)})}}})},this.getWrapForm=function(){for(var n=document.getElementsByClassName("wrap"),a=0;a<n.length;++a){var e=n[a],t=e.getElementsByTagName("form");if(t.length)return t[0]}var t=document.getElementsByTagName("form");if(1===t.length)return t[0];for(var a=0;a<t.length;++a){var i=t[a];if(n=i.getElementsByClassName("wrap"),n.length)return i}return null},this.getFormWrap=function(){for(var n=document.getElementsByTagName("form"),a=0;a<n.length;++a){var e=n[a],t=e.getElementsByClassName("wrap");if(t.length)return t[0]}for(var t=document.getElementsByClassName("wrap"),a=0;a<t.length;++a){var i=t[a];if(n=i.getElementsByTagName("form"),n.length)return i}return null},"function"==typeof n.addContentHooks&&n.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&this.addPageHooks(qTranslateConfig.page_config.forms),!a.length){var t=!1;for(var i in e){t=!0;break}if(!t)return}var r=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var o=0;o<qTranslateConfig.page_config.anchors.length;++o){var s=qTranslateConfig.page_config.anchors[o],l=document.getElementById(s);l&&r.push(l)}if(!r.length){var l=n.langSwitchWrapAnchor;l||(l=this.getWrapForm()),l||(l=this.getWrapForm()),l&&r.push(l)}for(var o=0;o<r.length;++o){var s=r[o],g=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap"});s.parentNode.insertBefore(g,s);{new qtranxj_LanguageSwitch(g)}}qTranslateConfig.onTabSwitchFunctions=[],qTranslateConfig.onTabSwitchFunctions.push(onTabSwitch),n.onTabSwitch&&qTranslateConfig.onTabSwitchFunctions.push(onTabSwitchCustom)};jQuery(document).ready(function(){new qTranslateX(qTranslateConfig.js)});